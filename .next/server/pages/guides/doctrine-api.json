{"pageProps":{"guide":{"title":"Doctrine des API dans l'administration","tagline":"Enjeux stratÃ©giques et conseils opÃ©rationnels : produire et diffuser ses API","tags":null,"image":"meta.png","noindex":false,"publish":true,"api":null,"body":"## Pourquoi une doctrine pour les API ?\n\nÃ‰laborÃ© par la DINUM avec les administrateurs ministÃ©riels des donnÃ©es, des algorithmes et des codes sources (AMDAC), ce cadre de recommandations prÃ©cise le cadre dâ€™action et identifie les bonnes pratiques Ã  poursuivre en matiÃ¨re dâ€™usage et dâ€™exposition dâ€™API par les administrations. Lâ€™objectif : favoriser le partage de donnÃ©es entre elles et ainsi faciliter les dÃ©marches des usagers.\n\n[ğŸ‘‰ Voir le cadre interministÃ©riel dâ€™administration de la donnÃ©e, publiÃ© en septembre 2021](https://www.numerique.gouv.fr/actualites/donnees-algorithmes-codes-sources-mobilisation-generale-sans-precedent-15-feuilles-de-route-ministerielles/)\n\n## 6 enjeux stratÃ©giques\n\n**6 enjeux stratÃ©giques ont Ã©tÃ© identifiÃ©s afin de rÃ©pondre au mieux aux besoins des utilisateurs, quâ€™il sâ€™agisse dâ€™administrations ou dâ€™usagers, tout en sâ€™intÃ©ressant Ã  la gestion du service proposÃ©.**\n\n- [ğŸ”­DÃ©couvrabilitÃ©](#ğŸ”­decouvrabilite)\n- [ğŸ”‘ AccÃ¨s Ã  la donnÃ©e](#ğŸ”‘acces-a-la-donnee)\n- [ğŸ‘·ğŸ»â€â™‚ï¸Exploitation des donnÃ©es](#ğŸ‘·ğŸ»%E2%80%8Dâ™‚%EF%B8%8Fexploitation-des-donnees)\n- [ğŸ‘Œ QualitÃ© de service](#ğŸ‘Œ-qualite-de-service)\n- [ğŸ©º Curation de la donnÃ©e](#ğŸ©º-curation-de-la-donnee)\n- [ğŸ’¶ ModÃ¨le Ã©conomique](#ğŸ’¶-modele-economique)\n\n## ğŸ”­DÃ©couvrabilitÃ©\n\n### Catalogue de donnÃ©es et services disponibles\n\n#### Recommandation 1\n\nEn complÃ©ment de la description (mÃ©tadonnÃ©es), les donnÃ©es et services publiquement accessibles sont visibles sur un catalogue exposÃ© sur Internet, rÃ©fÃ©rencÃ© sur les moteurs de recherche usuels et intelligibles (la description des API au sein du catalogue ou de lâ€™API manager propose un contenu destinÃ© aux opÃ©rationnels, fonctionnels comme techniques).\n\nLa description dâ€™une donnÃ©e doit rÃ©fÃ©rencer les API qui lâ€™exposent. Lâ€™exemple ci-dessous prÃ©sente les API disponibles pour la [base Sirene des entreprises et de leurs Ã©tablissements](https://www.data.gouv.fr/fr/datasets/base-sirene-des-entreprises-et-de-leurs-etablissements-siren-siret/), sur la page correspondant Ã  ce jeu de donnÃ©es sur data.gouv.fr :\n\n<img src=\"/images/guides/sirene-data.png\"/>\n\nExemples:\n\n- [api.gouv.fr](http://api.gouv.fr/) vise Ã  rÃ©fÃ©rencer toutes les API publiques de lâ€™Etat\n- [API ImpÃ´t Particulier](https://api.gouv.fr/les-api/impot-particulier) vise Ã  rÃ©fÃ©rencer toute la verticale mÃ©tier des finances publiques\n- Documentation fonctionnelle et technique\n\n#### Recommandation 2\n\nA chaque API exposÃ©e correspond :\n\n- **Une documentation fonctionnelle** prÃ©sentant la sÃ©mantique des donnÃ©es, leur qualitÃ© ainsi que leur source et leurs propriÃ©tÃ©s usuelles. Elle explicite Ã©galement le processus de demande dâ€™accÃ¨s et lâ€™Ã©ligibilitÃ© des rÃ©utilisateurs. Si un catalogue existe, un lien vers la description de la donnÃ©e est proposÃ© ;\n- **Une documentation technique** prÃ©sentant les modalitÃ©s dâ€™interrogation et de rÃ©cupÃ©ration de la donnÃ©e ;\n- **Les conditions gÃ©nÃ©rales dâ€™utilisation** prÃ©cisant les conditions contractuelles dâ€™accÃ¨s Ã  lâ€™API ;\n\nLa description dâ€™une API dÃ©crit Ã©galement **les pÃ©riodes de validitÃ© de lâ€™interface** (cf. principes 7 & 8) et son niveau de service (cf. principes 10 & 11).\n\n<details>\n   <summary>Ressources utiles</summary>\n\n[ğŸ“˜ Guide pratique - rÃ©fÃ©rencement sur api.gouv.fr](/guides/diffusion-api-guide-pratique#quels-sont-les-prerequis-pour-qu'une-api-puisse-etre-referencee-?)\n\n[ğŸ“™ Guide Etalab - documenter les donnÃ©es](https://guides.etalab.gouv.fr/qualite/documenter-les-donnees)\n\n</details>\n\n## ğŸ”‘AccÃ¨s Ã  la donnÃ©e\n\n### Gestion des habilitations dâ€™accÃ¨s aux API Ã  accÃ¨s restreint\n\n#### Recommandation 3\n\nLâ€™accÃ¨s aux API Ã  accÃ¨s restreint se fait par demande du rÃ©utilisateur (administrations, Ã©diteurs, entreprisesâ€¦).\n\nLes API peuvent sâ€™appuyer sur un mÃ©canisme dâ€™authentification de lâ€™utilisateur final assurant une gestion des droits au sein de la plateforme qui les fournit. Les dispositifs dâ€™authentification des citoyens, des agents ou des personnes morales conÃ§us par les pouvoirs publics pourront Ãªtre utilisÃ©s, en particulier lorsque le consentement de lâ€™utilisateur est nÃ©cessaire pour faire circuler la donnÃ©e :\n\n- Pour les personnes physiques : FranceConnect, AgentConnect et EduConnect\n- Pour les personnes morales : ProConnect\n\n#### Recommandation 4\n\nSi le droit dâ€™accÃ¨s nâ€™est pas prÃ©Ã©tabli, le processus de demande se fait de la maniÃ¨re la plus simple possible pour le rÃ©utilisateur. \n\nDans le cadre de demandes dâ€™accÃ¨s prÃ©vues par la loi et si le demandeur est Ã©ligible, une rÃ©ponse sera transmise aux rÃ©utilisateurs **dans un dÃ©lai recommandÃ© de 15 jours calendaires.** Le code des relations entre le public et lâ€™administration prÃ©voit un dÃ©lai lÃ©gal maximum de 30 jours pour rÃ©pondre Ã  une demande [(article R311-13)](https://www.legifrance.gouv.fr/codes/article_lc/LEGIARTI000031370409).\n\n<details>\n   <summary>Ressources utiles</summary>\n\n[ğŸ“˜ Guide pratique : Gestion de l'accÃ¨s Ã  votre API](/guides/diffusion-api-guide-pratique#ğŸ”‘-gestion-de-l'acces-a-votre-api)\n\n[ğŸ” DataPass : DÃ©livrer des Â« Pass Â» pour accÃ©der Ã  la Â« Data Â» produite par l'Ã‰tat.](https://beta.gouv.fr/startups/datapass.html)\n\n</details>\n\n**Bac Ã  sable d'expÃ©rimentation public**\n\n#### Recommandation 5\n\nA chaque API devrait correspondre une version â€œbac Ã  sableâ€, accessible en fonction du caractÃ¨re des donnÃ©es ouvertes ou en accÃ¨s restreint, exposant une version fictive des donnÃ©es et prÃ©sentant les mÃªmes modalitÃ©s techniques dâ€™exposition.\n\nPour les API ouvertes, le bac Ã  sable potentiel est accessible au grand public, sans demande prÃ©alable du rÃ©utilisateur. Pour les API Ã  accÃ¨s restreint, le bac Ã  sable contenant des donnÃ©es fictives pourrait Ãªtre accessible au rÃ©utilisateur aprÃ¨s demande dâ€™un jeton au fournisseur de donnÃ©es, bien que cette pratique ne soit pas recommandÃ©e.\n\n## ğŸ‘·ğŸ»â€â™‚ï¸Exploitation des donnÃ©es\n\n### Utilisation des standards technologiques du moment pour faciliter lâ€™interopÃ©rabilitÃ©\n\n#### Recommandation 6\n\nLes donnÃ©es et services sont exposÃ©s selon des standards techniques communÃ©ment partagÃ©s et adoptÃ©s.\n\nEn 2022, le principe dâ€™architecture et dâ€™encodage le plus connu et pratiquÃ© est le **standard REST Json** pour les API synchrones. \nIl est utilisÃ© par exemple pour les spÃ©cifications du standard OpenAPI (https://spec.openapis.org/oas/v3.1.0) ou les standards \"API\" de l'OGC (https://ogcapi.ogc.org). Concernant les API asynchrones, le principe AsyncAPI est le plus rÃ©pandu.\n\n> ***ğŸ‘ Bonne pratique :*** *Lâ€™approche Â« contract first Â», par opposition Ã  lâ€™approche Â« code first Â», est recommandÃ©e dans le dÃ©veloppement de nouvelles interfaces car elle permet de les stabiliser et de faire travailler plusieurs Ã©quipes en parallÃ¨le au sein dâ€™une mÃªme architecture.*\n\n### StabilitÃ© du modÃ¨le des interfaces\n\n#### Recommandation 7\n\nLes donnÃ©es et services sont exposÃ©s selon une interface (modalitÃ©s dâ€™appel et structuration des donnÃ©es Ã©changÃ©es) dÃ©finie pour une pÃ©riode donnÃ©e.\n\nLes dÃ©veloppements Agile ou nÃ©cessitant une Ã©volution prÃ©visible seront rendus identifiables et prÃ©ciseront une pÃ©riode de validitÃ© courte de 1 Ã  2 mois.\n\n#### Recommandation 8\n\n**Ces pÃ©riodes de validitÃ© de lâ€™interface sont explicitement prÃ©sentÃ©es aux rÃ©utilisateurs dans la documentation.** Les modifications prÃ©visibles sâ€™accompagneront de lâ€™actualisation prÃ©alable des informations descriptives intÃ©grant des liens vers des communications et guides permettant aux rÃ©utilisateurs dâ€™anticiper les Ã©volutions. \n\nLes rÃ©utilisateurs pourront basculer durant une pÃ©riode dÃ©finie et communiquÃ©e sur la version modifiÃ©e de lâ€™interface. Durant ce laps de temps, deux interfaces cohabiteront, la version prÃ©cÃ©dente dÃ©prÃ©ciÃ©e et la nouvelle version.\n\nLe dÃ©tail de ces informations sera prÃ©sentÃ© en dÃ©tail dans les conditions gÃ©nÃ©rales dâ€™utilisation de lâ€™API.\n\n#### Recommandation 9\n\nToute modification non rÃ©tro-compatible impose un versionning en tant que version majeure et une cohabitation de lâ€™ancien et du nouveau modÃ¨le pendant une pÃ©riode de recouvrement. **Celle-ci doit Ãªtre communiquÃ©e Ã  lâ€™avance en diffusant le nouveau contrat dâ€™interface de lâ€™API.** A dÃ©faut dâ€™information prÃ©alable ou dâ€™accord des rÃ©utilisateurs, la pÃ©riode de cohabitation sera comprise entre 6 mois et 1 an.\n\nSi une Ã©volution de la donnÃ©e interdit le maintien de lâ€™ensemble des fonctionnalitÃ©s de lâ€™API (exemple : modification dâ€™un schÃ©ma avec abandon de certaines informations), il sera indiquÃ© quelles requÃªtes ou parties du protocole seront maintenues.\n\n## ğŸ‘Œ QualitÃ© de service\n\n### Indications sur le temps de rÃ©ponse et la tenue en charge\n\n#### Recommandation 10\n\nLa charge admise par une API est consultable en toute transparence par les rÃ©utilisateurs :\n\n**1. Dans le cas dâ€™une API authentifiÃ©e,** la charge est exprimÃ©e sous forme de mÃ©triques propres Ã  chaque rÃ©utilisateur, comme le nombre dâ€™appels sur une pÃ©riode donnÃ©e par exemple ;\n\n**2. Dans le cas dâ€™une API non authentifiÃ©e,** la charge tenable est exprimÃ©e dans son ensemble, tous rÃ©utilisateurs confondus ;\n\n**3. Dans le cas dâ€™une infrastructure permettant, via une API, des requÃªtes complexes, ou servant de nombreuses donnÃ©es,** la charge tenable estimÃ©e indiquera les critÃ¨res utilisÃ©s et le caractÃ¨re estimatif de cette Ã©valuation ;\n\n**4. Dans le cas dâ€™une API sujette Ã  des fortes Ã©volutions en fonction de la saisonnalitÃ©,** le temps de rÃ©ponse maximal sera prÃ©cisÃ© ainsi que les risques de rupture de service.\n\n#### Recommandation 11\n\nLes temps de rÃ©ponse moyens et maximaux sont prÃ©sentÃ©s dans la documentation de lâ€™API. Les temps de rÃ©ponse mesurÃ©s ou estimÃ©s sont fournis Ã  titre indicatif et non contractuel. Tout autre dÃ©marche relÃ¨ve dâ€™un dâ€™accord entre le fournisseur dâ€™API et les rÃ©utilisateurs en fonction de leurs cas dâ€™usages.\n\n### Transparence sur la disponibilitÃ© de lâ€™API\n\n#### Recommandation 12\n\nLâ€™Ã©tat de lâ€™API reprÃ©sente sa capacitÃ© Ã  Ãªtre appelÃ©e dans les conditions rÃ©elles par un rÃ©utilisateur. Il est rendu accessible aux rÃ©utilisateurs et consultable en temps rÃ©el sous forme dâ€™une URL, indiquÃ©e dans la description de lâ€™API, permettant de tester que l'API se dÃ©clare disponible et requetable. En complÃ©ment, il est souhaitable de permettre de consulter un historique entre 6 mois et une annÃ©e.\n\n<details>\n   <summary>Exemple pour l'API Particulier</summary>\n\n> <img src=\"/images/guides/doctrine_dispo_api.png\" alt= \"disponibilitÃ©\" style=\"width:700px\"/>\n> [Voir la page complÃ¨te](https://status.api.gouv.fr/)\n\n</details>\n\n### Suivi des consommations des donnÃ©es et services\n\n#### Recommandation 13\n\nLes consommations des API sont enregistrÃ©es pour Ãªtre ensuite restituÃ©es aux bÃ©nÃ©ficiaires (rÃ©utilisateur, producteur, API managers ou exploitants).\n\n> ***ğŸ‘ Bonne pratique :*** *les bÃ©nÃ©ficiaires ont accÃ¨s Ã  travers un portail Ã  une restitution en temps rÃ©el ou ponctuelle de ces statistiques de consommation des donnÃ©es ainsi que celles des autres bÃ©nÃ©ficiaires.*\n\n## ğŸ©º Curation de la donnÃ©e\n\n#### Recommandation 14\n\nLes rÃ©utilisateurs disposent dâ€™un moyen technique ou organisationnel leur permettant de faire des retours sur la qualitÃ© des donnÃ©es vers leur gestionnaire ou via la description des donnÃ©es au sein de leur catalogue dâ€™origine.\n\nLes rÃ©utilisateurs disposent Ã©galement dâ€™un moyen technique ou organisationnel leur permettant de faire des retours sur la qualitÃ© des API exposÃ©es vers leur fournisseur ou via la description de lâ€™API.\n\n> ğŸ’¡ ***Exemple :*** *Le dispositif Datapass pouvant Ãªtre utilisÃ© par les API en accÃ¨s restreint permet de faire un retour sur la qualitÃ© des donnÃ©es disponibles via celles-ci.*\n\n## ğŸ’¶ ModÃ¨le Ã©conomique\n\n### GratuitÃ© de la donnÃ©e, et de lâ€™exposition\n\n#### Recommandation 15\n\nLâ€™accÃ¨s Ã  la donnÃ©e et aux services doit Ãªtre Ã©galitaire. Les fournisseurs de donnÃ©es cherchent Ã  adapter les modalitÃ©s dâ€™accÃ¨s aux besoins des rÃ©utilisateurs.\n\n#### Recommandation 16\n\nLes donnÃ©es ainsi que les API sont mises Ã  disposition gratuitement, pour les rÃ©utilisateurs uniquement, sauf exceptions devant faire lâ€™objet dâ€™une justification par lâ€™administration productrice.\n\n> ğŸ’¡ ***Exemple :*** *Dans le cas oÃ¹ des usages nÃ©cessiteraient une qualitÃ© de service au-dessus de ce que la multitude dâ€™utilisateurs a couramment besoin, comme par exemple une bande passante Ã©levÃ©e pour de la donnÃ©e temps-rÃ©el volumineuse desservie sur quelques organismes, il sera possible dâ€™organiser un systÃ¨me freemium avec une Ã©galitÃ© dâ€™accÃ¨s Ã  des APIs par dÃ©faut et des APIs faisant lâ€™objet de redevances pour les usages les plus exigeants.*\n\n## Vous souhaitez distribuer une API ? \n\n<Button href=\"/guides/diffusion-api-guide-pratique\">AccÃ©der au guide pratique</Button>\n","path":"/guides/doctrine-api","slug":"doctrine-api"},"related_guides":[]},"__N_SSG":true}